<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Records</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="icon.png" type="image/png">
    <link rel="manifest" href="./manifest.json">
    <script>
        if ('service-worker.js' in navigator) { // serviceWorker --> service-worker.js
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                    console.log('Service Worker registered with scope:', registration.scope);
                }, function(error) {
                    console.log('Service Worker registration failed:', error);
                });
            });
        }
    </script>
    <script>
    document.addEventListener('contextmenu', (e) => e.preventDefault()); // Disable right-click
    
    document.addEventListener('keydown', (e) => {
      // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+Shift+C, Ctrl+U
      if (
        e.key === "F12" || 
        (e.ctrlKey && e.shiftKey && ["I", "J", "C"].includes(e.key)) || 
        (e.ctrlKey && e.key === "U")
      ) {
        e.preventDefault();
      }
    });
  </script>
</head>
<body>
    <div class="container2"><center>
        <h3 id="currentDate"></h3>

        <table id="attendanceList">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Attendance Code</th>
                    <th>Timestamp</th>
                </tr>
            </thead>
            <tbody>
                <!-- Attendance records will be populated here -->
            </tbody>
        </table>

        <BR><h2>! Disclaimer !</h2>
        <p>For a better user experience, switch to <strong>Desktop mode</strong>.</p><BR>
        <p>Install the app by visiting <strong>Add to Home Screen.</strong></p><BR>    

        <button id="installButton">Install App</button> <!-- Install Button -->
        <p>You have successfully marked your attendance.</p>
        <div class="submit-button">
            <button type="button" id="refreshResult">Refresh Result</button>
            
        </div>
        <a href="index.html">Back To Page</a>
        </center>
    </div>
	<div id="loading-spinner-container" class="spinner-container" style="display: none;">
        <div class="sk-circle" style="--sk-size: 60px; --sk-color: #3498db;">
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
          <div class="sk-circle-dot"></div>
        </div>
      </div>
    <script>
	const options = { day: 'numeric', month: 'long', year: 'numeric' };
	document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-GB', options);
    </script>
    <script type="module" src="script.js"></script>
    </body>
</html>
